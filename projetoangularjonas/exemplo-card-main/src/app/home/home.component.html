<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - FIT</title>
    <link rel="stylesheet" href="homeprincipal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <div class="app-layout">

    <style>
        body { overflow-y: scroll; }
        body::-webkit-scrollbar { width: 10px; }
        body::-webkit-scrollbar-track { background: #e4e4e4; border-radius: 50px; }
        body::-webkit-scrollbar-thumb { background: #8b3fff; border-radius: 50px; }
        body::-webkit-scrollbar-thumb:hover { background: #6a1be7; }
    </style>

    <aside class="sidebar">
        <div class="logo-area">
            <div class="logo-box">FIT</div>
        </div>
        
        <nav class="main-nav">
            <a class="nav-item active" onclick="IrParaHome()">
                <i class="fas fa-home"></i> Home
            </a>
            <script>function IrParaHome(){ window.location.href='homeprincipal.html'; }</script>
            
            <a class="nav-item" onclick="IrParaTreino()">
                <i class="fas fa-dumbbell"></i> Treinos
            </a>
            <script>function IrParaTreino(){ window.location.href='treinodehoje.html'; }</script>

            <a class="nav-item" onclick="IrParaNutri()">
                <i class="fas fa-utensils"></i> Nutrição
            </a>
            <script>function IrParaNutri(){ window.location.href='nutrição.html'; }</script>
        </nav>

        <div class="profile-area" onclick="IrParaPerfil()">
            <a class="nav-item profile-link">
                <i class="fas fa-user-circle"></i> Perfil
            </a>
        </div>
        <script>function IrParaPerfil(){ window.location.href='perfil.html'; }</script>
    </aside>
        <main class="dashboard-content">
            <div class="background-wave"></div>

            <header class="dashboard-header">
                <h1 class="greeting">Olá! <span class="user-name">(usuário)</span></h1>
            </header>

            <section class="dashboard-main-area">
                <div class="left-column">

                    <div class="main-objective-card">
                        <span>Objetivo principal:</span>
                        <p id="objetivoTexto">...</p>
                    </div>

                    <div class="progress-circle-wrapper">
                        <div class="progress-circle">
                            <svg class="progress-ring" width="200" height="200">
                                <circle class="progress-ring-track" stroke="#e0e0e0" stroke-width="12"
                                    fill="transparent" r="80" cx="100" cy="100" />
                                <circle class="progress-ring-bar" id="progressBar" stroke="#9d50ff" stroke-width="12"
                                    fill="transparent" r="80" cx="100" cy="100" />
                            </svg>
                            <div class="progress-text">
                                <span class="percentage" id="percentNum">0%</span>
                                <span class="status">concluído</span>
                            </div>
                        </div>
                    </div>

                    <button class="access-training-button" onclick="IrPara('treinodehoje.html')">
                        Acessar treino de hoje
                    </button>
                </div>

                <div class="right-column">

                    <div class="stat-card">
                        <h3 class="stat-title">Estatística de peso</h3>
                        <p class="stat-value" id="pesoAtualTxt">Peso atual: -- kg</p>
                        <div class="weight-change">
                            <i class="fas fa-arrow-down down-arrow"></i>
                            <span id="pesoMudancaTxt">0 kg</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <h3 class="stat-title">Calorias consumidas</h3>
                        <p class="stat-value">
                            <span id="kcalConsumidas">0</span> /
                            <span id="kcalMeta">2000</span> kcal
                        </p>
                        <div class="progress-bar-wrapper">
                            <div class="progress-bar" id="kcalProgressBar"></div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <h3 class="stat-title">Evolução semanal</h3>
                        <div class="chart-placeholder">
                            <div class="bar-chart-container">
                                <div class="bar" style="height: 40%;"></div>
                                <div class="bar" style="height: 70%;"></div>
                                <div class="bar" style="height: 50%;"></div>
                                <div class="bar" style="height: 85%;"></div>
                                <div class="bar" style="height: 60%;"></div>
                            </div>
                        </div>
                    </div>

                </div>
            </section>
        </main>
    </div>

    <script>
        function IrPara(pagina) {
            window.location.href = pagina;
        }

        const nome = localStorage.getItem("nome") || "Usuário";
        const objetivo = localStorage.getItem("objetivo") || "Não definido";
        const pesoAtual = localStorage.getItem("peso") || "--";
        const pesoInicial = localStorage.getItem("pesoInicial") || pesoAtual;
        const kcalMeta = localStorage.getItem("kcalMeta") || 2000;
        const kcalConsumidas = localStorage.getItem("kcalConsumidas") || 0;
        const porcentagem = Math.min((kcalConsumidas / kcalMeta) * 100, 100);

        document.querySelector(".user-name").textContent = nome;
        document.getElementById("objetivoTexto").textContent = objetivo;
        document.getElementById("pesoAtualTxt").textContent = `Peso atual: ${pesoAtual} kg`;
        document.getElementById("kcalConsumidas").textContent = kcalConsumidas;
        document.getElementById("kcalMeta").textContent = kcalMeta;

        const diff = (pesoAtual - pesoInicial).toFixed(1);
        document.getElementById("pesoMudancaTxt").textContent = diff + " kg";

        document.getElementById("kcalProgressBar").style.width = porcentagem + "%";

        const circle = document.getElementById("progressBar");
        const raio = circle.r.baseVal.value;
        const circ = 2 * Math.PI * raio;

        circle.style.strokeDasharray = `${circ}px`;
        circle.style.strokeDashoffset = `${circ - (porcentagem / 100) * circ}px`;

        document.getElementById("percentNum").textContent = Math.round(porcentagem) + "%";
    </script>

</body>

</html>